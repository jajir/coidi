<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 07 Feb 2016 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20160207" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Coidi - Integration - RP</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />

      
    <script type="text/javascript" src="./js/apache-maven-fluido-1.4.min.js"></script>

                          
        
<script type="text/javascript">var _gaq = _gaq || [];
				_gaq.push(['_setAccount',
				'UA-33730727-1']);
				_gaq.push(['_trackPageview']);

				(function() {
				var ga
				= document.createElement('script'); ga.type = 'text/javascript';
				ga.async = true;
				ga.src = ('https:' == document.location.protocol ?
				'https://ssl' :
				'http://www') + '.google-analytics.com/ga.js';
				var s =
				document.getElementsByTagName('script')[0];
				s.parentNode.insertBefore(ga, s);
				})();</script>
          
                  </head>
        <body class="topBarDisabled">
          
    
    
            
    
    
    <a href="https://github.com/apache/maven-skins">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                                  <a href="./" id="bannerLeft">
                                                                                                <img src="coidi-logo.png"  alt="Coidi"/>
                </a>
                      </div>
        <div class="pull-right">  </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                              <li class="">
                    <a href="https://github.com/jajir/coidi" class="externalLink" title="Coidi at Github">
        Coidi at Github</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="./" title="Documentation">
        Documentation</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Integration - RP</li>
        
                
                    
                  <li id="publishDate" class="pull-right">Last Published: 07 Feb 2016</li>
            
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Coidi</li>
                              
      <li>
  
                          <a href="index.html" title="Index">
          <span class="none"></span>
        Index</a>
            </li>
                
      <li>
  
                          <a href="why-sso.html" title="Why SSO">
          <span class="none"></span>
        Why SSO</a>
            </li>
                
      <li>
  
                          <a href="how-to-start.html" title="How to start">
          <span class="none"></span>
        How to start</a>
            </li>
                                                                                                                                                                                          
      <li>
  
                          <a href="openid.html" title="OpenID">
          <span class="icon-chevron-down"></span>
        OpenID</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="introduction.html" title="Introduction">
          <span class="none"></span>
        Introduction</a>
            </li>
                    
      <li>
  
                          <a href="data-model.html" title="Data model">
          <span class="none"></span>
        Data model</a>
            </li>
                    
      <li>
  
                          <a href="communication.html" title="Communication">
          <span class="none"></span>
        Communication</a>
            </li>
                    
      <li>
  
                          <a href="identity.html" title="Identity">
          <span class="none"></span>
        Identity</a>
            </li>
                    
      <li>
  
                          <a href="normalization.html" title="Normalization">
          <span class="none"></span>
        Normalization</a>
            </li>
                    
      <li>
  
                          <a href="discovery.html" title="Discovery">
          <span class="none"></span>
        Discovery</a>
            </li>
                    
      <li>
  
                          <a href="xrds.html" title="XRDS">
          <span class="none"></span>
        XRDS</a>
            </li>
                    
      <li>
  
                          <a href="authentication.html" title="Authentication">
          <span class="none"></span>
        Authentication</a>
            </li>
              </ul>
        </li>
                                                                                        
      <li>
  
                          <a href="integration.html" title="How to integrate">
          <span class="icon-chevron-down"></span>
        How to integrate</a>
                    <ul class="nav nav-list">
                    
      <li class="active">
  
            <a href="#"><span class="none"></span>Relying party</a>
          </li>
                    
      <li>
  
                          <a href="integration-op.html" title="OpenID provider">
          <span class="none"></span>
        OpenID provider</a>
            </li>
              </ul>
        </li>
                                                                                                
      <li>
  
                          <a href="development.html" title="Development">
          <span class="icon-chevron-down"></span>
        Development</a>
                    <ul class="nav nav-list">
                    
      <li>
  
                          <a href="project.html" title="Project structure">
          <span class="none"></span>
        Project structure</a>
            </li>
                    
      <li>
  
                          <a href="op-processing.html" title="Message processing">
          <span class="none"></span>
        Message processing</a>
            </li>
                    
      <li>
  
                          <a href="release.html" title="Release methodology">
          <span class="none"></span>
        Release methodology</a>
            </li>
              </ul>
        </li>
                
      <li>
  
                          <a href="abbreviations.html" title="Abbreviations">
          <span class="none"></span>
        Abbreviations</a>
            </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                         <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Maven" src="maven-feather.png"    />
      </a>
                                                                                                          <a href="http://tapestry.apache.org/" title="Tapestry 5" class="builtBy">
        <img class="builtBy"  alt="Tapestry 5" src="tapestry.png"    />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <div class="section">
<h2>Integration - RP<a name="Integration_-_RP"></a></h2>
<div class="section">
<h3>First steps<a name="First_steps"></a></h3>
<div class="section">
<h4>Requirements<a name="Requirements"></a></h4>
<ul>
<li>Coidi RP could by integrated just with java web application. Java 1.6 or greater.</li></ul></div>
<div class="section">
<h4>Integration steps<a name="Integration_steps"></a></h4>
<ol style="list-style-type: decimal">
<li>Changes in UI (required) - you should add new form for for entering user's OpenId identificators.</li>
<li>Call OpenId relaying party functions</li>
<li>Persistent nonce store (optionally) - Nonces have to be stored for some limited time. In some cases nonces could hold just in application memory.</li>
<li>Scheduler (optionally) - All nonces are stored in nonce store. Nonce is valid just for limited time. When this time exceed than nonce could be removed. Deleting of stale nonces should be called periodically by some scheduler. </li></ol>
<p>Clustered deployment structure of OpenID relying part:</p><img src="appdeployment-rp-nonce.png" alt="RP with implemented nonce store " />
<p>In most cases is scheduler in both nodes.</p></div></div>
<div class="section">
<h3>Integration steps <a name="Integration_steps"></a></h3>
<div class="section">
<h4>UI changes<a name="UI_changes"></a></h4>
<p>On Relaying party side have to be created new form for entering user'd identifiers. According to OpenId specification form field where user should enter his OpenID identification string should be called &quot;openid_identifier&quot;. Then just &quot;Submit&quot; button is required. After submitting user's identification should be passed to relaying party verification process. </p></div>
<div class="section">
<h4>Call OpenId relaying party functions<a name="Call_OpenId_relaying_party_functions"></a></h4></div>
<div class="section">
<h4>Persistent nonce store<a name="Persistent_nonce_store"></a></h4>
<p>As was mentioned nonces are unique string that verify that authentication was used just one time. When nonce come for first time to RP than is stored. Next time when it come whole message is rejected. Simply says it's just place where are nonces stored for some limited time (usually 30 minutes). When you run you application as single node that you can store nonces in memory. This approach allows use nonces more that once when your application is restarted. In that case you can use bundled in memory nonce store. You should consider if this security vulnerability is acceptable for your application.</p>
<p>When you run application with more that one node or you don't want accept risk of reusing nonce after application restart that you have to consider your persistent nonce store. You can create your own nonce store by implementing <i>com.coroptis.coidi.rp.services.NonceDao</i> interface from rp library.</p>
<p>When you expect big load of uses and authentication requests than you should take care of removing of old nonces.</p>
<p>Nonce store could be implemented with any technology, for example:</p>
<ul>
<li>Database - JPA </li>
<li>Shared cache memory - for example <a class="externalLink" href="http://memcached.org/">memcached</a></li>
<li>LDAP</li></ul>
<p>Coidi doesn't provide concrete implementation, because each application have it's special requirements for drivers, library that can't by fulfilled by coidi library.</p></div>
<div class="section">
<h4>Scheduler<a name="Scheduler"></a></h4>
<p>When is used some kind of persistent store for nonces than this nonces after some time become stale. Stale nonces could be removed. Process of removing staled nonces could be run periodically by some scheduler. Scheduler should be part of production application. Coidi library scheduler doesn't support because scheduler is usually part of application server </p></div></div>
<div class="section">
<h3>Integration od code<a name="Integration_od_code"></a></h3></div></div>
<div class="section">
<h2>TODO add some examples<a name="TODO_add_some_examples"></a></h2></div>
<div class="section">
<h2>configuration of normalization dicovery and authentication request creating.<a name="configuration_of_normalization_dicovery_and_authentication_request_creating."></a></h2></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                          </div>

        
                </div>
    </footer>
        </body>
</html>
